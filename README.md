# سورس ربات آپلودر رایگان
چون خیلی از دوستان و کاربران کانالم به یک سورس آپلودر رایگان نیاز داشتن، تصمیم گرفتم تا این رو اینجا منتشر کنم. این سورس آپلودر دارای قابلیت های آپلود تکی و گروهی فایل ها، حذف فایل، مشاهده آمار کاربران ربات و تنظیم کانال عضویت برای ربات هست. در ادامه بهتون آموزش کامل ران کردن و ویرایش این ربات رو ارائه میدم.
## راهنمای فعال سازی(ران کردن ربات آپلودر)
فایل config.php رو به حالت ویرایش در بیارید. در این فایل شما با کد های زیر کار دارید :
```
$myDatabase = [
    'host' => 'localhost',
    'username' => 'db_username', // یوزرنیم دیتابیس
    'password' => 'db_password', // پسورد دیتابیس
    'dbname' => 'db_name' // نام دیتابیس
];
$conn = mysqli_connect($myDatabase["host"], $myDatabase["username"], $myDatabase["password"], $myDatabase["dbname"]);
$usersTable = ""; // نام جدول  یوزر های ربات
$filesTable = ""; // نام جدول فایل های ربات

define('API_KEY', 'TOKEN'); // توکن رو جای عبارت TOKEN بذارید.
$usernamebot = "BOTUSERNAME"; // یوزرنیم ربات رو بدون @ جای BOTUSERNAME بذارید.
$admins = [5551507638, 1311631827]; // آیدی عددی ادمین های ربات به صورت آرایه.
$botChanel = ["URL", "NAME"]; // ایندکس 0 آرایه یوزرنیم کانال بدون@ و ایندکس 1 آرایه نام کانال جوین اجباری ربات هست. ربات باید ادمین این کانال باشه.
```
### متغیر $myDatabase
مشخصات دیتابیس رو در این آرایه وارد کنید.
### متغیر های $usersTable و $filesTable
در متغیر $usersTable نام جدول یوزر های رباتتون در دیتابیس رو وارد کنید. این یک نام دلخواه انگلیسی هست.
در متغیر $filesTable نام جدول فایل های ربات در دیتابیس رو وارد کنید. نام این جدول هم می تونید به دلخواه و انگلیسی وارد کنید.
**نکته : این دو متغیر برای این ایجاد شدن که شما بتونید به راحتی چند ربات با همین سورس روی هاستتون ران کنید.**
### ثابت API_KEY
توکن ربات خود رو در این ثابت به جای عبارت TOKEN قرار بدید.
### متغیر $usernamebot
یوزرنیم ربات رو بدون @ جای BOTUSERNAME بذارید. این برای ساخت لینک دریافت فایل از رباته.
### متغیر $admins
آیدی عددی ادمین های ربات رو در این آرایه وارد کنید. هیچ محدودیتی برای تعداد ادمین ها وجود ندارد.
### متغیر $botChanel
این متغیر برای قرار دادن مشخصات کانال عضویت رباتتون هست. در ابتدا باید ربات رو ادمین کانالتون کنید. سپس آیدی کانالتون رو بدون علامت @ در ایندکس 0 آرایه(به جای URL) قرار بدید و متنی رو که می خواید روی دکمه شیشه ای نمایش داده بشه رو در ایندکس 1 (به جای NAME) قرار بدید.
**مثال : CHANELLINK**
### قدم آخر
حالا فایل config.php رو ذخیره کنید و ببندید. سپس روی فایل bot.php عملیات ست وبهوک رو انجام بدید.
می تونید از ربات @WebhookioBot برای ست وبهوک رباتتون استفاده کنید.*
**تبریک میگم، ربات شما فعال شد!**
## آموزش ویرایش سورس کد
این ربات خیلی ساده هست و تمام تلاشم رو کردم تا اصول کلین کد رو در هنگام نوشتن سورسش رعایت کنم. با این حال، آموزش ویرایش بعضی بخشارو اینجا براتون قرار میدم تا اگر لازم داشتید استفاده کنید.
### تنظیم کانال های عضویت بیشتر در ربات
متاسفانه این سورس کد به صورت پیشفرض تنها ظرفیت یک کانال عضویت رو داره. اما اینجا بهتون آموزش میدم که چطور کانال های عضویت بیشتری برای ربات تنظیم کنید.
#### شرط check_channel_member
در لاین 18 فایل bot.php، شرطی وجود داره که خروجی تابع check_channel_member را که در فایل functions.php نوشته شده است چک می کنه. این تابع، مشخص می کنه که کاربر شما عضور کانال مورد نظر هست یا نه. تکه کد این شرط به صورت زیر می باشد :
```
    if (check_channel_member("@$botChanel[0]", $chat_id) == "no") {
        $theText = "📣 - کاربر عزیز شما عضو کانال اسپانسر  ربات نیستید و امکان استفاده از ربات را ندارید .\n\n⭕️ لطفا در کانال زیر عضو شوید :\n\n🆔 @$botChanel[0]\n\nسپس به ربات برگشته و مجدد امتحان کنید ✔️";
        SendMessage($chat_id, $theText, "HTML", $message_id, $botChanelKeyboard);
    } else { 
        # code...
    }
```
این شرط تعیین می کند که اگر کاربر عضو کانال ربات بود، ربات براش  کار کنه و در غیر این صورت، پیام درخواست عضویت بهش نمایش داده بشه.
حالا اگر شما می خواید کانال های بیشتری رو به عنوان کانال عضویت ست کنید، کافیه با استفاده از تابع check_channel_member، اون کانال رو هم در همین شرط چک کنید. تکه کدش به صورت زیر خواهد بود :
```
    if (check_channel_member("@$botChanel[0]", $chat_id) == "no" && check_channel_member("آدرس کانال شما بدون @", $chat_id) == "no") {
      // نمایش پیام درخواست عضویت در کانال ها
    } else { 
        # code...
    }
```
**نکته : ربات شما حتما باید ادمین کانال های عضویت باشه.**
**نکته : پیام درخواست عضویت در کانال ها، حاوی یک پنل شیشه ای هم هست. این پنل در فایل keyboards.php در متغیر $botChanelKeyboard دخیره شده و می تونید به راحتی اون رو هم متناسب با کانال های عضویتی که به ربات اضافه کردید ویرایش کنید.**

##### پایان ماجرا
دلم می خواست این سورس کد رو با قابلیت های بیشتری منتشر کنم اما متاسفانه از نظر زمانی در موقعیتی نبودم که تایم بیشتری روش بذارم. اما **اگر یک سورس آپلودر خیلی بهتر می خواید،** هیچ جای نگرانی نیست چون ما در سایت سورسیو هم براتون دو سورس ربات آپلودر فوقالعاده پیشرفته منتشر کردیم.

**[سورس ربات آپلودر معمولی سورسیو](https://sourcio.ir/product/uploader-telegram-bot/) | [سورس ربات آپلودر پیشرفته سورسیو](https://sourcio.ir/product/pro-uploader-bot/)**

همچنین خوشحال میشم من رو در کانال تلگرامم هم همراهی کنید:)
**https://t.me/theAriaChannel**
